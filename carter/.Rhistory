# library(DT)
library(tigris)
library(sf)
library(biscale)
library(cowplot)
sessionInfo()
ggplot(mtcars, aes(mpg, cyl)) +
geom_point()
ggplot(mtcars, aes(mpg, cyl)) +
geom_point()
ggplot(mtcars, aes(mpg, cyl)) +
geom_point()
ggplot(mtcars, aes(mpg, cyl)) +
geom_point()
ggplot(mtcars, aes(mpg, cyl)) +
geom_point()
test = data.frame(x = c(1:9), y = c(1:9))
ggplot(test, aes(x, y)) +
geom_point()
library(tidyverse)
library(tigris)
library(sf)
library(biscale)
library(cowplot)
federal_data <- read_csv("./data/climate_env_justice_screening_tool.csv")
oregon_data <-
federal_data |>
filter(`State/Territory` == "Oregon")
tracts_sf <- tracts(state = "OR", year = 2010)
sf_w_data <-
left_join(oregon_data, tracts_sf, by = c("Census tract 2010 ID" = "GEOID10")) |>
st_as_sf()
counties_ver <-
sf_w_data |>
group_by(`County Name`) |>
summarize(pm2.5  = mean(`PM2.5 in the air (percentile)`, na.rm = T),
asthma = mean(`Current asthma among adults aged greater than or equal to 18 years (percentile)`, na.rm = T))
counties_bivar <-
counties_ver |>
bi_class(x = asthma, y = pm2.5, style = "quantile", dim = 3)
map <-
ggplot(counties_bivar, aes(fill = bi_class)) +
geom_sf() +
bi_scale_fill(pal = "PurpleOr") +
bi_theme() +
theme(legend.position = "none",
plot.margin = unit(c(0,14,0,0), "cm"))
legend <-
bi_legend(pal = "PurpleOr",
dim = 3,
xlab = "Higher rate of asthma",
ylab = "Higher pm2.5 concentration",
size = 14)
finalPlot <- ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0.6, 0.26, 0.48, 0.48)
finalPlot
library(plotly)
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile"))
View(selected_data)
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
counties_sf <- counties(state = "OR", year = 2010)
View(counties_sf)
View(oregon_data)
metric_names
View(selected_data)
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile")) |>
mutate(county_ID = substring(`Census tract 2010 ID`, 3, 5),
.keep = "unused")
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
grouped_data <-
selected_data |>
group_by(`County Name`)
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile"))
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile"))
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
grouped_data <-
selected_data |>
group_by(`County Name`)
View(selected_data)
View(selected_data)
oregon_data <-
federal_data |>
filter(`State/Territory` == "Oregon")
sf_w_data <-
left_join(oregon_data, tracts_sf, by = c("Census tract 2010 ID" = "GEOID10")) |>
st_as_sf()
class(sf_w_data)
grouped_data <-
selected_data |>
group_by(`County Name`)
selected_data <-
sf_w_data |>
select(-where(is.logical), -contains("percentile"))
grouped_data <-
selected_data |>
group_by(`County Name`)
class(selected_data)
class(grouped_data)
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Current asthma among adults aged greater than or equal to 18 years"]], na.rm = T),
metric2 = mean(.data[["PM2.5 in the air"]], na.rm = T))
class(counties_summary)
oregon_data <-
federal_data |>
filter(`State/Territory` == "Oregon")
counties_sf <- counties(state = "OR", year = 2010)
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile"))
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
grouped_data <-
selected_data |>
group_by(`County Name`)
class(grouped_data)
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Current asthma among adults aged greater than or equal to 18 years"]], na.rm = T),
metric2 = mean(.data[["PM2.5 in the air"]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAME10")) |>
st_as_sf()
class(counties_summary)
View(counties_summary)
federal_data <- read_csv("./data/climate_env_justice_screening_tool.csv")
federal_data <- read_csv("/home/cartermcmahon/Documents/capstone/data/climate_env_justice_screening_tool.csv")
oregon_data <-
federal_data |>
filter(`State/Territory` == "Oregon")
counties_sf <- counties(state = "OR", year = 2010)
selected_data <-
oregon_data |>
select(-where(is.logical), -contains("percentile"))
metric_names <-
selected_data |>
as.data.frame() |>
select(where(is.numeric)) |>
names()
grouped_data <-
selected_data |>
group_by(`County Name`)
rm(federal_data)
rm(oregon_data)
rm(selected_data)
save.image(file = "shiny_data.RData")
map <-
ggplot(counties_bivar, aes(fill = bi_class)) +
geom_sf_interactive() +
#geom_sf() +
bi_scale_fill(pal = "PurpleOr") +
bi_theme() +
theme(legend.position = "none",
plot.margin = unit(c(0,14,0,0), "cm"))
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[1]], na.rm = T),
metric2 = mean(.data[[2]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
View(grouped_data)
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[3]], na.rm = T),
metric2 = mean(.data[[4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[3], na.rm = T),
metric2 = mean(.data[4], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[,3]], na.rm = T),
metric2 = mean(.data[[,4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[,3]], na.rm = T),
metric2 = mean(.data[[,4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[,3]], na.rm = T),
metric2 = mean(.data[[,4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[,3]], na.rm = T),
metric2 = mean(.data[[,4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[[3]], na.rm = T),
metric2 = mean(.data[[4]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Percent Asian"]], na.rm = T),
metric2 = mean(.data[["Energy Burden"]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Percent Asian"]], na.rm = T),
metric2 = mean(.data[["Energy burden"]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Percent Asian"]], na.rm = T),
metric2 = mean(.data[["Energy burden"]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_bivar <-
counties_summary |>
bi_class(x = metric1, y = metric2, style = "quantile", dim = 3)
map <-
ggplot(counties_bivar, aes(fill = bi_class)) +
geom_sf_interactive() +
#geom_sf() +
bi_scale_fill(pal = "PurpleOr") +
bi_theme() +
theme(legend.position = "none",
plot.margin = unit(c(0,14,0,0), "cm"))
legend <-
bi_legend(pal = "PurpleOr",
dim = 3,
xlab = input$metric1,
ylab = input$metric2,
size = 14)
library(flexdashboard)
library(tidyverse)
library(sf)
library(biscale)
library(cowplot)
# library(tigris)
library(ggiraph)
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
counties_summary <-
grouped_data |>
summarize(metric1 = mean(.data[["Percent Asian"]], na.rm = T),
metric2 = mean(.data[["Energy burden"]], na.rm = T)) |>
left_join(counties_sf, by = c("County Name" = "NAMELSAD10")) |>
st_as_sf()
counties_bivar <-
counties_summary |>
bi_class(x = metric1, y = metric2, style = "quantile", dim = 3)
map <-
ggplot(counties_bivar, aes(fill = bi_class)) +
geom_sf_interactive() +
#geom_sf() +
bi_scale_fill(pal = "PurpleOr") +
bi_theme() +
theme(legend.position = "none",
plot.margin = unit(c(0,14,0,0), "cm"))
legend <-
bi_legend(pal = "PurpleOr",
dim = 3,
xlab = "Percent Asian",
ylab = "Energy burden",
size = 14)
final_plot <-
ggdraw() +
draw_plot(map, 0, 0, 1, 1) +
draw_plot(legend, 0.6, 0.26, 0.48, 0.48)
girafe(ggobj = final_plot)
.libPaths()
R.version
install.packages("/home/cartermcmahon/Downloads/ggiraph_0.8.0.tar.gz", repos = NULL, type="source")
remove.packages("bspm")
install.packages("ggiraph")
install.packages("ggiraph")
install.packages("ggiraph")
load("./data/shiny_data.RData")
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
View(grouped_data)
install.packages("shinydashboardPlus")
library(shinydashboardPlus)
library(shiny)
library(shinydashboard)
library(shinydashboardPlus)
library(shinydashboardPlus)
library(ggiraph)
runApp('Documents/capstone/capstone_shiny_plus')
install.packages("sf")
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny_plus')
runApp('Documents/capstone/capstone_shiny')
runApp('Documents/capstone/capstone_shiny')
runApp('Documents/capstone/capstone_shiny')
metric_names
length("pqpq")
nchar
nchar("pqpq")
"pqpq"[1]
"pqpq"[[1]]
substr("pqpq", 1, 1)
substr("pqpq", 1, 4)
substr("pqpq", 1, 3)
load("./data/shiny_data.RData")
load("/home/cartermcmahon/Documents/capstone/data/shiny_data.RData")
metric_names
strsplit("Percent Black or African American alone", "^.{0,22}\b", perl = TRUE)
strsplit("Percent Black or African American alone", "^.{0,22}b", perl = TRUE)
strsplit("Percent Black or African American alone", "\^.{0,22}\b", perl = TRUE)
strsplit("Percent Black or African American alone", "^\.{0,22}\b", perl = TRUE)
strsplit("Percent Black or African American alone", "^\\.{0,22}\b", perl = TRUE)
strsplit("Percent Black or African American alone", "^.{0,22}\b")
strsplit("Percent Black or African American alone", "^.{0,22}\\b")
strsplit("Percent Black or African American alone", "\^.{0,22}\\b")
strsplit("Percent Black or African American alone", "^.{0,22}\\b")
strsplit("Percent Black or African American alone", "^.{0,22}\b")
strsplit("Percent Black or African American alone", "(^|\G).{0,22}\b")
library(stringr)
str_extract_all("Percent Black or African American alone", "(^|\G).{0,22}\b")
str_extract_all("Percent Black or African American alone", "^.{0,22}\b")
str_extract_all("Percent Black or African American alone", "(^.{0,22}\b)")
str_extract_all("Percent Black or African American alone", "(^.{0,22}\\b)")
str_extract_all("Percent Black or African American alone", "(.{0,22}\\b)")
str_extract_all(,metric_names,  "(.{0,22}\\b)")
str_extract_all(metric_names,  "(.{0,22}\\b)")
str_extract_all(metric_names,  "(.{0,22}(\\b|$))")
str_extract_all(metric_names,  "(.{0,22}(\\s|$))")
metric_names
str_extract_all(metric_names,  "(.{0,22})\\s")
str_extract_all(metric_names,  "(.{0,22})(\\s|$)")
str_extract(metric_names,  "(.{0,22})(\\s|$)")
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]]
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]][``]
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]][1]
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]][2]
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]][1,2]
str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]][1:2]
paste(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]])
paste(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]], sep = "\n")
paste(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)"), sep = "\n")
paste(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]], sep = "\n")
str_flatten(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]], sep = "\n")
str_flatten(str_extract_all("Percent Black or African American alon", "(.{0,22})(\\s|$)")[[1]], collapse = "\n")
str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n")
str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\\n")
str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n")
print(str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n"))
cagt(str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n"))
cat(str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n"))
cat(str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n", last = ""))
str_flatten(str_extract_all("Percent Black or African American alone", "(.{0,22})(\\s|$)")[[1]], collapse = "\n", last = "")
str_extract_all("Current asthma among adults aged greater than or equal to 18 years", "(.{0,22})(\\s|$)")[[1]]
str_extract_all("Current asthma among adults aged greater than or equal to 18 years", "(.{0,22})(\\s|$)")
str_extract_all("Current asthma among adults aged greater than or equal to 18 years", "(.{0,22})(\\s|$)")[[1]]
str_flatten(str_extract_all("Current asthma among adults aged greater than or equal to 18 years", "(.{0,22})(\\s|$)")[[1]], collapse = "\n", last = "")
View(grouped_data)
chr(13)
library(gtools)
chr(13)
str_wrap("Current asthma among adults aged greater than or equal to 18 years", 24)
library(patchwork, lib.loc = "/usr/lib/R/site-library")
library(patchwork)
shiny::runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
shiny::runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
shiny::runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
ui <- dashboardPage(
#skin = "midnight",
title = "Climate Change Vulnerability in Oregon"
header = dashboardHeader(),
runApp('Documents/capstone/alternative_ideas/capstone_shiny_plus')
library(flexdashboard)
library(ggplot2)
library(dplyr)
library(stringr)
library(sf)
library(biscale)
library(cowplot)
library(ggiraph)
library(patchwork)
library(DT)
library(tidyr)
load("../data/shiny_data.RData")
sens_options + demo_options
c(sens_options, demo_options)
county_compare
county_compare %>% arrange(ratio)
county_compare %>% arrange(desc(ratio))
county_compare %>% arrange(desc(ratio)) %>% slice_head(n = 5)
?corr
?cor
test = grouped_data |>
summarize(sens = weighted.mean(`Percent Black or African American alone`, `Total population`, na.rm = T),
expo = mean(`Diesel particulate matter exposure`, na.rm = TRUE)))
test = grouped_data |>
summarize(sens = weighted.mean(`Percent Black or African American alone`, `Total population`, na.rm = T),
expo = mean(`Diesel particulate matter exposure`, na.rm = TRUE))
cor(test$sens, test$expo)
load("../data/shiny_data.RData")
load("~/Documents/capstone/repo/data/shiny_data.RData")
setwd("~/Documents/capstone/repo/carter")
